using System.Collections.Generic;
using SkiaSharp;

public record LabelMark(string Text, float X, float Y, SKColor Color, float TextSize = 16f, float Dx = 6f, float Dy = 6f);

public static class AnnotationOverlay
{
    public static SKBitmap DrawLabels(SKBitmap baseBitmap, IEnumerable<LabelMark> labels)
    {
        var result = baseBitmap.Copy();
        using var canvas = new SKCanvas(result);
        using var paint = new SKPaint
        {
            IsAntialias = true,
            Color = SKColors.White,
            TextSize = 16f
        };

        foreach (var lab in labels)
        {
            paint.Color = lab.Color;
            paint.TextSize = lab.TextSize;

            // Dot (optional): tiny marker at exact position
            canvas.DrawCircle(lab.X, lab.Y, 2.5f, paint);

            // Text offset a bit so it doesnâ€™t overlap the dot
            canvas.DrawText(lab.Text, lab.X + lab.Dx, lab.Y + lab.Dy, paint);
        }

        return result;
    }
}
