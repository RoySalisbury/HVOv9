@page "/blazor-sample"
@page "/BlazorSample"
@using HVO.WebSite.RoofControllerV4.Models
@using HVO.WebSite.RoofControllerV4.Services
@rendermode @(new InteractiveServerRenderMode(prerender: false))

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="weather-station text-white p-4">
                <div class="row align-items-center mb-4">
                    <div class="col-auto">
                        <h1 class="display-4 mb-0">
                            <i class="fas fa-cloud-sun me-3"></i>
                            Weather Station
                        </h1>
                    </div>
                    <div class="col">
                        <div class="last-updated text-end">
                            @if (isLoading)
                            {
                                <div class="loading-spinner mx-auto"></div>
                            }
                            else if (weatherData != null)
                            {
                                <span>Last Updated: @weatherData.LastUpdated.ToString("HH:mm:ss")</span>
                            }
                        </div>
                    </div>
                </div>

                @if (weatherData != null)
                {
                    <div class="row g-4">
                        <!-- Temperature Display -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-thermometer-half"></i>
                                </div>
                                <div class="temperature-display">
                                    @weatherData.OutsideTemperature°F
                                </div>
                                <div class="weather-label">Outside Temperature</div>
                                <div class="mt-2">
                                    <small>Inside: @weatherData.InsideTemperature°F</small>
                                </div>
                            </div>
                        </div>

                        <!-- Humidity -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div class="weather-value">
                                    @weatherData.OutsideHumidity%
                                </div>
                                <div class="weather-label">Humidity</div>
                                <div class="mt-2">
                                    <small>Inside: @weatherData.InsideHumidity%</small>
                                </div>
                            </div>
                        </div>

                        <!-- Wind -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-wind"></i>
                                </div>
                                <div class="weather-value">
                                    @weatherData.WindSpeed mph
                                </div>
                                <div class="weather-label">Wind Speed</div>
                                <div class="mt-2">
                                    <small>Direction: @weatherData.WindDirectionText (@weatherData.WindDirection°)</small>
                                </div>
                            </div>
                        </div>

                        <!-- Barometer -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-weight"></i>
                                </div>
                                <div class="weather-value">
                                    @weatherData.Barometer"
                                </div>
                                <div class="weather-label">Barometer</div>
                                <div class="mt-2">
                                    <small>inHg</small>
                                </div>
                            </div>
                        </div>

                        <!-- Rain -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-cloud-rain"></i>
                                </div>
                                <div class="weather-value">
                                    @weatherData.RainRate"
                                </div>
                                <div class="weather-label">Rain Rate</div>
                                <div class="mt-2">
                                    <small>Daily: @weatherData.DailyRainAmount"</small>
                                </div>
                            </div>
                        </div>

                        <!-- UV Index & Solar -->
                        <div class="col-md-6 col-lg-4">
                            <div class="weather-card p-4 text-center">
                                <div class="weather-icon">
                                    <i class="fas fa-sun"></i>
                                </div>
                                <div class="weather-value">
                                    @weatherData.UvIndex
                                </div>
                                <div class="weather-label">UV Index</div>
                                <div class="mt-2">
                                    <small>Solar: @weatherData.SolarRadiation W/m²</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mt-4">
                        <div class="col-md-6">
                            <div class="weather-card p-3">
                                <h6 class="mb-3">
                                    <i class="fas fa-cloud me-2"></i>
                                    Current Conditions
                                </h6>
                                <div class="d-flex align-items-center">
                                    <i class="fas fa-circle text-success me-2"></i>
                                    <span class="weather-value">@weatherData.WeatherCondition</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="weather-card p-3">
                                <h6 class="mb-3">
                                    <i class="fas fa-sun me-2"></i>
                                    Sun Times
                                </h6>
                                <div class="row">
                                    <div class="col-6">
                                        <small>Sunrise: @weatherData.SunriseTime?.ToString("HH:mm")</small>
                                    </div>
                                    <div class="col-6">
                                        <small>Sunset: @weatherData.SunsetTime?.ToString("HH:mm")</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
                else if (isLoading)
                {
                    <div class="text-center py-5">
                        <div class="loading-spinner mx-auto mb-3"></div>
                        <p>Loading weather data...</p>
                    </div>
                }
                else
                {
                    <div class="alert alert-warning" role="alert">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        No weather data available
                    </div>
                }
            </div>
        </div>
    </div>
</div>
